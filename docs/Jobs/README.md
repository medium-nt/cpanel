# Документация по Job классам

В данном разделе представлена подробная документация по всем Job классам
приложения.

## Обзор

Jobs в Laravel используются для выполнения длительных операций в фоновом режиме
через очереди. Это позволяет значительно улучшить пользовательский опыт и
производительность приложения.

## Структура документации

Каждый Job документируется со следующими разделами:

- **Назначение задачи** - основное предназначение Job
- **Параметры конструктора** - входные данные для Job
- **Метод handle** - основная логика выполнения
- **Метод failed** - обработка ошибок после всех попыток
- **Промежуток попыток** - настройки retry механизма
- **Middleware задачи** - используемые middleware (если есть)
- **Очередь для выполнения** - информация о привязке к очереди
- **Особенности реализации** - важные детали и особенности

## Список задокументированных Jobs

1. [SendTelegramMessageJob](SendTelegramMessageJob.md) - отправка сообщений в
   Telegram через очередь

## Полезные команды для работы с Jobs

```bash
# Запуск worker для обработки очередей
php artisan queue:work

# Запуск worker для конкретной очереди
php artisan queue:work --queue=notifications

# Запуск worker с прослушиванием нескольких очередей
php artisan queue:work --queue=high,default,low

# Перезапуск всех queue workers
php artisan queue:restart

# Просмотр неудачных jobs
php artisan queue:failed

# Повторная попытка выполнения неудачного job
php artisan queue:retry 1

# Очистка очереди
php artisan queue:clear

# Удаление неудачных jobs
php artisan queue:flush
```

## Рекомендации по созданию Jobs

1. **Используйте типизацию параметров** - всегда указывайте типы для
   конструктора и методов
2. **Определяйте количество попыток** - устанавливайте разумное количество
   попыток выполнения
3. **Реализуйте отложенные попытки** - используйте метод `backoff()` для
   установки интервалов
4. **Логируйте ошибки** - обязательно логируйте ошибки в методе `failed()`
5. **Избегайте лишних зависимостей** - минимизируйте количество зависимостей для
   ускорения сериализации
6. **Используйте очереди** - привязывайте Jobs к конкретным очередям для
   приоритизации

## Логирование

При работе с Jobs рекомендуется использовать следующие каналы логирования:

- `queue` - для стандартных событий очередей
- `queue-failed` - для логирования неудачных попыток
- Специфические каналы для конкретной функциональности (например, `tg_api` для
  Telegram API)

## Обновление документации

Документация была последний раз обновлена: **2025-12-05**

При добавлении новых Job классов обязательно обновляйте данный раздел и файл
`.index.json` в корневой директории документации.
