# Справочные таблицы

## settings - Настройки системы

**Файл миграции:** `2025_05_12_132147_create_settings_table.php`

### Структура таблицы:

| Колонка    | Тип         | Описание           | Индекс/Ключ |
|------------|-------------|--------------------|-------------|
| id         | bigint      | ID настройки       | PRIMARY     |
| name       | string(255) | Название настройки | UNIQUE      |
| value      | text        | Значение настройки |             |
| created_at | timestamp   | Дата создания      |             |
| updated_at | timestamp   | Дата обновления    |             |

### Особенности:

- Уникальность названия обеспечивает хранение только одной настройки с каждым
  именем
- Текстовое поле значения позволяет хранить любые типы данных (JSON, числа,
  строки)

## cache - Кэш системы

**Файл миграции:** `0001_01_01_000001_create_cache_table.php`

### Структура таблицы:

| Колонка    | Тип         | Описание        | Индекс/Ключ |
|------------|-------------|-----------------|-------------|
| key        | string(255) | Ключ кэша       | PRIMARY     |
| value      | mediumText  | Значение кэша   |             |
| expiration | integer     | Время истечения |             |

### Связанные таблицы:

- **cache_locks** - блокировки кэша

#### cache_locks:

| Колонка    | Тип         | Описание            | Индекс/Ключ |
|------------|-------------|---------------------|-------------|
| key        | string(255) | Ключ блокировки     | PRIMARY     |
| owner      | string(255) | Владелец блокировки |             |
| expiration | integer     | Время истечения     |             |

## jobs - Очереди задач

**Файл миграции:** `0001_01_01_000002_create_jobs_table.php`

### Структура таблицы:

| Колонка      | Тип                 | Описание           | Индекс/Ключ |
|--------------|---------------------|--------------------|-------------|
| id           | bigint              | ID задачи          | PRIMARY     |
| queue        | string(255)         | Название очереди   | INDEX       |
| payload      | longText            | Данные задачи      |             |
| attempts     | unsignedTinyInteger | Количество попыток |             |
| reserved_at  | unsignedInteger     | Время резервации   | NULLABLE    |
| available_at | unsignedInteger     | Время доступности  |             |
| created_at   | unsignedInteger     | Время создания     |             |

### Связанные таблицы:

- **job_batches** - Пакеты задач
- **failed_jobs** - Проваленные задачи

#### job_batches:

| Колонка        | Тип         | Описание             | Индекс/Ключ |
|----------------|-------------|----------------------|-------------|
| id             | string(255) | ID пакета            | PRIMARY     |
| name           | string(255) | Название пакета      |             |
| total_jobs     | integer     | Всего задач          |             |
| pending_jobs   | integer     | Ожидает задач        |             |
| failed_jobs    | integer     | Провалено задач      |             |
| failed_job_ids | longText    | ID проваленных задач |             |
| options        | mediumText  | Опции                | NULLABLE    |
| cancelled_at   | integer     | Время отмены         | NULLABLE    |
| created_at     | integer     | Время создания       |             |
| finished_at    | integer     | Время завершения     | NULLABLE    |

#### failed_jobs:

| Колонка    | Тип         | Описание       | Индекс/Ключ |
|------------|-------------|----------------|-------------|
| id         | bigint      | ID задачи      | PRIMARY     |
| uuid       | string(255) | UUID задачи    | UNIQUE      |
| connection | text        | Соединение     |             |
| queue      | text        | Очередь        |             |
| payload    | longText    | Данные задачи  |             |
| exception  | longText    | Исключение     |             |
| failed_at  | timestamp   | Время failures |             |

### Особенности структуры:

1. **Настройки** - централизованное хранение конфигурации приложения
2. **Кэш** - стандартная Laravel система кэширования с поддержкой блокировок
3. **Очереди задач** - полная поддержка асинхронного выполнения задач:
    - Основная очередь задач
    - Группировка задач в пакеты
    - Отслеживание проваленных задач

Все справочные таблицы обеспечивают базовую функциональность Laravel фреймворка.
