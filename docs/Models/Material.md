# Модель Material

**Путь:** `app/Models/Material.php`

**Назначение:** Модель для хранения информации о материалах, используемых в
производстве

**Таблица в БД:** `materials`

## Атрибуты

### Fillable (массово назначаемые)

- `title` - Наименование материала
- `type_id` - ID типа материала (связь с TypeMaterial)
- `height` - Высота/толщина материала
- `unit` - Единица измерения материала

## Связи (Relationships)

### BelongsTo (принадлежит к)

- `type()` - Тип материала (связь с моделью TypeMaterial)

### HasMany (имеет много)

- `movementMaterials()` - Движения материалов на складе
- `rates()` - Ставки для расчета оплаты за работу с материалом

### BelongsToMany (многие ко многим)

- `users()` - Пользователи, работающие с данным материалом

## Особенности использования

1. **SoftDeletes:** Модель использует мягкое удаление (trait SoftDeletes)
2. **Классификация:** Материалы классифицируются по типам через связь с
   TypeMaterial
3. **Отслеживание движений:** Через связь с MovementMaterial отслеживаются все
   перемещения материала
4. **Расчет ставок:** Используется для определения ставок оплаты через связь с
   моделью Rate
5. **Привязка к сотрудникам:** Материалы могут быть закреплены за определенными
   сотрудниками

## Примеры использования

```php
// Получение материала с типом
$material = Material::with('type')->find($id);

// Получение всех материалов определенного типа
$fabrics = Material::where('type_id', $typeId)->get();

// Получение материалов с историей движений
$materials = Material::with('movementMaterials')->get();

// Получение материалов, закрепленных за пользователем
$userMaterials = $user->materials;

// Создание нового материала
$material = Material::create([
    'title' => 'Ткань хлопковая',
    'type_id' => 1,
    'height' => 1.5,
    'unit' => 'м'
]);

// Фильтрация по названию
$searchResults = Material::where('title', 'like', '%хлопок%')->get();
```
