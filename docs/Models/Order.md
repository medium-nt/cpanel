# Order

## Назначение модели

Модель `Order` представляет заказы в системе - включая производственные заказы,
заказы поставщикам и заказы на перемещение материалов. Связана с таблицей
`orders` в базе данных.

## Атрибуты

### Fillable (массово присваиваемые)

- `type_movement` - тип перемещения (связано с TypeMovement)
- `status` - статус заказа (связано с StatusMovement)
- `supplier_id` - ID поставщика (Supplier)
- `storekeeper_id` - ID кладовщика (User)
- `seamstress_id` - ID швеи (User)
- `cutter_id` - ID закройщика (User)
- `comment` - комментарий к заказу
- `marketplace_order_id` - ID заказа с маркетплейса
- `is_approved` - флаг одобрения заказа
- `completed_at` - дата завершения заказа

### Appends (вычисляемые атрибуты)

- `status_name` - название статуса
- `status_color` - цвет бейджа статуса
- `type_movement_name` - название типа перемещения

### Отсутствуют

- `hidden` - отсутствуют скрытые атрибуты
- `casts` - отсутствуют приведения типов

## Связи с другими моделями

### BelongsTo (многие к одному)

- `user()` - кладовщик (через storekeeper_id)
- `seamstress()` - швея
- `cutter()` - закройщик
- `supplier()` - поставщик

### HasMany (один ко многим)

- `movementMaterials()` - перемещенные материалы в рамках заказа

## Скоупы и методы

### Accessors (мутаторы/доступы)

- `getStatusNameAttribute(): string` - возвращает название статуса из
  StatusMovement::STATUSES
- `getStatusColorAttribute(): string` - возвращает цвет бейджа из
  StatusMovement::BADGE_COLORS
- `getTypeMovementNameAttribute(): string` - возвращает название типа
  перемещения из TypeMovement::TYPES
- `getUpdatedDateAttribute()` - возвращает дату обновления в формате 'd/m/Y'
- `getCreatedDateAttribute()` - возвращает дату создания в формате 'd/m/Y'

## Особенности реализации

- Центральная модель системы заказов, охватывающая разные типы:
    - Заказы поставщикам на материалы
    - Производственные заказы
    - Перемещения материалов
    - Заказы, связанные с маркетплейсами
- Использует статические классы-справочники (StatusMovement, TypeMovement) для
  получения названий
- Поддерживает полный цикл обработки заказа с различными статусами
- Учитывает множество исполнителей:
    - Кладовщик (приемка/выдача материалов)
    - Закройщик (раскрой)
    - Швея (швейные работы)
- Флаг `is_approved` позволяет реализовать процесс согласования заказов
- Связь с marketplace_order_id интегрирует производственные заказы с заказами
  клиентов
- Отсутствие приведения типов для completed_at предполагает хранение даты в
  строковом формате
